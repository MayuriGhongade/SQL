/* IT IS CODE OR PROGRAM WHICH WILL CALLED AUTOMATICALLY
WHEN SOME EVENT OCCURS IN DATABASE.
-->WE CAN APPLY TRIGGERS FOR DML STATEMENTS ONLY.(INSERT, UPDATE, DELETE)
-->ALERT COAST BY AN EVENT
1)BEFORE INSERT
2)AFTER INSERT
3)BEFORE UPDATE
4)AFTER UPDATE
5)BEFORE DELETE
6)AFTER DELETE  */

/*1)BEFORE INSERT */
CREATE DATABASE TRIGGER1;
USE TRIGGER1;
CREATE TABLE EMP
(
EMPNO INT,
ENAME VARCHAR(50),
SAL INT,
WORKING_HOURS INT
);


INSERT INTO EMP VALUES
(2, 'ASHWIN',5000, -65);

SELECT * FROM EMP;
TRUNCATE TABLE EMP;
SELECT * FROM EMP;

create table emp1
(
empno int,
ename varchar(10),
sal int
);

INSERT INTO EMP1 VALUES(1,'VISHAL',1000);
SELECT * FROM AUDIT;
SELECT * FROM EMP1;
create table audit
(
empno int,
description varchar(200)
);

/*2)AFTER INSERT*/
CREATE TABLE PRODUCT
(
PID INT,
PNAME VARCHAR(50),
PRICE INT  
);


INSERT INTO PRODUCT VALUES (1,'MOBILE1',10000),
						   (2,'MOBILE2',20000),
                           (3,'MOBILE3',30000),
                           (4,'MOBILE4',40000);

SELECT * FROM PRODUCT;

UPDATE PRODUCT
SET PRICE = 60000
WHERE PID = 1;




CREATE TABLE STUDENT
(
SID INT,
SNAME VARCHAR(50),
CLASS INT
);


CREATE TABLE STUDENT_INFO
(
USER VARCHAR(20),
DESCRIPTION VARCHAR(200)
);

INSERT INTO STUDENT VALUES (1,'SMITH',1),
                           (2,'MARTIN',9),
                           (3,'KING',7);
						
UPDATE STUDENT
SET CLASS=CLASS+1;
                           
SELECT * FROM STUDENT_INFO;


CREATE TABLE EMP3
(
EMPNO INT,
ENAME VARCHAR(20),
SAL INT
);

INSERT INTO EMP3 VALUES(1,'ARUN',2000),
                       (2,'VINAY',3000);
SELECT * FROM EMP3;

DELETE FROM EMP3 
WHERE EMPNO=1;
SELECT * FROM BACKUP;

CREATE TABLE BACKUP
(
EMPNO INT,
ENAME VARCHAR(20),
SAL INT,
TOE TIMESTAMP DEFAULT NOW()
);


CREATE TABLE EMP4
(
EMPNO INT,
ENAME VARCHAR(20),
SAL INT
);


INSERT INTO EMP4 VALUES(1,'ARUN',2000),
                       (2,'VINAY',3000),
                       (3,'VISHAL',5000);

CREATE TABLE BUDGET
(
TOTAL INT
);

INSERT INTO BUDGET(TOTAL) SELECT SUM(SAL) FROM EMP4;


SELECT * FROM EMP4;

SELECT * FROM BUDGET;

DELETE FROM EMP4 WHERE EMPNO =2;



































